{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Desktop/Projects/Hotel-management-Mern-stack-/client/hotel/src/Account.jsx\",\n    _s = $RefreshSig$();\n\nimport \"./x.css\";\nimport Navbar from \"./Navbar\";\nimport { useState, useEffect } from \"react\";\nimport Modals from \"./Components/model\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { updateRoom } from './features/roomSlice/roomSlice';\nimport Modal from \"react-modal\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Account() {\n  _s();\n\n  const [modalISOpen, setModalISOpen] = useState(false);\n  const userId = useSelector(state => state.Hotel.User.User.id);\n  const Name = useSelector(state => state.Hotel.User.User.Name);\n  const Email = useSelector(state => state.Hotel.User.User.Email);\n  const img = useSelector(state => state.Hotel.User.User.img);\n  const [done, setDone] = useState(false);\n  const RoomsInfo = useSelector(state => state.Hotel.Room.Room);\n  const [modalISOpen2, setModalISOpen2] = useState(false);\n  const [bookedrooms, setbookedrooms] = useState([]);\n  const [final, setFinal] = useState([]);\n  let res = [];\n  RoomsInfo.forEach(el => {\n    const index = res.findIndex(obj => {\n      return obj['id'] === el.id;\n    });\n\n    if (index === -1) {\n      res.push({\n        \"id\": el.id,\n        \"type\": el.type,\n        \"source\": el.source,\n        \"price\": el.price,\n        \"count\": 1\n      });\n    } else {\n      res[index][\"count\"]++;\n    }\n\n    ;\n  });\n  let sum = 0;\n  res.map(room => {\n    sum += room.price;\n  });\n  const dispatch = useDispatch();\n\n  async function fetchData() {\n    let array = [];\n    console.log(\"fetching...\");\n\n    try {\n      const response = await axios.get(\"http://localhost:5004/api/Rooms/getuserRooms?userid=\" + userId);\n      console.log(\"resp1\" + JSON.stringify(response));\n\n      for (let i = 0; i < response.data.length; i++) {\n        console.log(response.data[i].room_id);\n        const response2 = await axios.get(\"http://localhost:5004/api/Rooms/getbyID?roomid=\" + response.data[i].room_id + \"&type=\" + 'hello');\n        console.log('response2' + response2.data);\n        setFinal([...final, response2]);\n      }\n\n      if (array.length > 0) {\n        console.log('hello');\n        setFinal(array);\n      }\n    } catch {\n      setDone(false);\n    }\n  }\n\n  useEffect(async () => {\n    if (final.length > 0) {\n      setbookedrooms(final);\n      setDone(true);\n    }\n  }, [final]);\n  useEffect(async () => {\n    await fetchData();\n  }, []);\n  useEffect(() => {\n    console.log(\"hello2\");\n    console.log(final);\n    console.log(bookedrooms);\n  }, [done]);\n  useEffect(() => {}, [RoomsInfo]);\n  const headingStyle = {\n    backgroundImage: \"linear-gradient(to right, gray, red)\",\n    WebkitBackgroundClip: \"text\",\n    backgroundClip: \"text\",\n    WebkitTextFillColor: \"transparent\",\n    textFillColor: \"transparent\",\n    fontWeight: \"extrabold\"\n  };\n\n  const DeleteRoomHandler = id => {\n    dispatch(updateRoom(RoomsInfo.filter(object => {\n      return object.id !== id;\n    })));\n  };\n\n  const insertOnwers = async event => {\n    event.preventDefault();\n    let count = 0;\n    let rooms = \"\";\n    console.log(\"hello\");\n    Promise.all(res.map(async room => {\n      try {\n        await axios.post(\"http://localhost:5004/api/Rooms/insertOnwers\", {\n          room_id: room.id,\n          user_id: userId\n        });\n        count += 1;\n      } catch {\n        rooms += room.type + \" \";\n      }\n    })).then(() => {\n      if (count == res.length) {\n        alert(\"Payment done\");\n      } else {\n        alert(\"These rooms already booked:\" + rooms);\n      }\n    });\n    console.log(rooms);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      class: \"Block\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: headingStyle,\n        children: \"Your Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        style: {\n          height: \"500px\",\n          width: \"500px\"\n        },\n        src: img,\n        alt: \"Avatar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lab\",\n        style: {\n          marginTop: \"30px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: Name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: Email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        class: \"btn-dark\",\n        onClick: event => {\n          event.preventDefault();\n          setModalISOpen(true);\n        },\n        children: \"My Orders\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), done && /*#__PURE__*/_jsxDEV(\"button\", {\n        class: \"btn-dark\",\n        onClick: event => {\n          event.preventDefault();\n          setModalISOpen2(true);\n        },\n        children: \"My Booked Rooms\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modals, {\n      modalISOpen: modalISOpen,\n      setModalISOpen: setModalISOpen,\n      res: res,\n      DeleteRoomHandler: DeleteRoomHandler,\n      insertOnwers: insertOnwers,\n      sum: sum\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      class: \"modal\",\n      isOpen: modalISOpen2,\n      style: {\n        overlay: {\n          top: 100,\n          position: \"fixed\",\n          left: \"28%\",\n          backgroundColor: \"transparent\",\n          width: \"700px\",\n          outline: \"no\",\n          height: \"500px\",\n          transform: \"scale(1)\",\n          transition: \"transform 0.3s cubic-bezier(0.465, 0.183, 0.153, 0.946)\",\n          opacity: \"0.3s cubic-bezier(0.465, 0.183, 0.153, 0.946)\"\n        },\n        content: {\n          position: \"absolute\"\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        class: \"list-group\",\n        children: done == true ? bookedrooms.map(object => {\n          console.log(\"Rooms:\");\n          console.log(object.source);\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            class: \"list-group-item \",\n            style: {\n              display: \"flex\",\n              justifyContent: \"space-between\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"image2\",\n              src: object === null || object === void 0 ? void 0 : object.source,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: object === null || object === void 0 ? void 0 : object.type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: object === null || object === void 0 ? void 0 : object.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                height: \"50px\",\n                borderRadius: \"20px\"\n              },\n              onClick: () => {\n                DeleteRoomHandler(object === null || object === void 0 ? void 0 : object.id);\n              },\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"space-between\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"closing\",\n          style: {\n            marginTop: \"20px\",\n            borderRadius: \"20px\"\n          },\n          onClick: () => setModalISOpen2(false),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Account, \"RLtX/79r8usKTF0oTL/o9g/pFuw=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = Account;\nexport default Account;\n\nvar _c;\n\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"sources":["/Users/macbook/Desktop/Projects/Hotel-management-Mern-stack-/client/hotel/src/Account.jsx"],"names":["Navbar","useState","useEffect","Modals","useSelector","useDispatch","updateRoom","Modal","axios","Account","modalISOpen","setModalISOpen","userId","state","Hotel","User","id","Name","Email","img","done","setDone","RoomsInfo","Room","modalISOpen2","setModalISOpen2","bookedrooms","setbookedrooms","final","setFinal","res","forEach","el","index","findIndex","obj","push","type","source","price","sum","map","room","dispatch","fetchData","array","console","log","response","get","JSON","stringify","i","data","length","room_id","response2","headingStyle","backgroundImage","WebkitBackgroundClip","backgroundClip","WebkitTextFillColor","textFillColor","fontWeight","DeleteRoomHandler","filter","object","insertOnwers","event","preventDefault","count","rooms","Promise","all","post","user_id","then","alert","height","width","marginTop","overlay","top","position","left","backgroundColor","outline","transform","transition","opacity","content","display","justifyContent","borderRadius"],"mappings":"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","sourcesContent":["import \"./x.css\";\r\nimport Navbar from \"./Navbar\";\r\nimport { useState,useEffect} from \"react\";\r\nimport Modals from \"./Components/model\";\r\nimport { useSelector,useDispatch } from \"react-redux\";\r\nimport  {updateRoom} from './features/roomSlice/roomSlice'\r\nimport Modal from \"react-modal\";\r\nimport axios from \"axios\";\r\nfunction Account() {\r\n  const [modalISOpen, setModalISOpen] = useState(false);\r\n  const userId = useSelector((state) => state.Hotel.User.User.id);\r\n  const Name = useSelector((state) => state.Hotel.User.User.Name);\r\n  const Email = useSelector((state) => state.Hotel.User.User.Email);\r\n  const img= useSelector((state) => state.Hotel.User.User.img);\r\n  const [done,setDone]=useState(false)\r\nconst RoomsInfo = useSelector((state) => state.Hotel.Room.Room);\r\nconst [modalISOpen2, setModalISOpen2] = useState(false);\r\n  const [bookedrooms,setbookedrooms]=useState([])\r\n  const [final,setFinal]=useState([])\r\n  let res=[]\r\n     RoomsInfo.forEach(el => {\r\n      const index = res.findIndex(obj => {\r\n         return obj['id'] === el.id;\r\n      });\r\n      if(index === -1){\r\n         res.push({\r\n            \"id\": el.id,\r\n            \"type\":el.type,\r\n            \"source\":el.source,\r\n            \"price\":el.price,\r\n            \"count\": 1\r\n         })\r\n      }\r\n      else{\r\n         res[index][\"count\"]++;\r\n      };\r\n   });\r\n  let sum=0\r\n  res.map((room)=>{\r\n    sum+=room.price\r\n  })\r\n  const dispatch=useDispatch()\r\n  async function fetchData() {\r\n    let array = [];\r\n    console.log(\"fetching...\");\r\n    try {\r\n      const response = await axios.get(\"http://localhost:5004/api/Rooms/getuserRooms?userid=\" + userId);\r\n      console.log(\"resp1\"+JSON.stringify(response))\r\n      for (let i = 0; i < response.data.length; i++) {\r\n        console.log(response.data[i].room_id)\r\n        const response2 = await axios.get(\"http://localhost:5004/api/Rooms/getbyID?roomid=\" + response.data[i].room_id+\"&type=\"+'hello');\r\n        console.log('response2'+response2.data);\r\n        setFinal([...final,response2])\r\n      }\r\n      if(array.length>0){\r\n        console.log('hello')\r\n        setFinal(array)\r\n      }\r\n    } catch {\r\n      setDone(false);\r\n    }\r\n  }\r\n  useEffect(async()=>{\r\n    if(final.length>0){\r\n      setbookedrooms(final)\r\n      setDone(true);\r\n    }\r\n   },[final])\r\n  useEffect(async()=>{\r\n   await fetchData()\r\n  },[])\r\n  useEffect(()=>{\r\n    console.log(\"hello2\")\r\n    console.log(final)\r\nconsole.log(bookedrooms)\r\n  },[done])\r\n  useEffect(() => {\r\n\r\n  }, [RoomsInfo])\r\n  const headingStyle = {\r\n    backgroundImage: \"linear-gradient(to right, gray, red)\",\r\n    WebkitBackgroundClip: \"text\",\r\n    backgroundClip: \"text\",\r\n    WebkitTextFillColor: \"transparent\",\r\n    textFillColor: \"transparent\",\r\n    fontWeight: \"extrabold\",\r\n  };\r\nconst DeleteRoomHandler=(id)=>{\r\ndispatch(updateRoom(RoomsInfo.filter((object)=>{\r\n  return object.id!==id\r\n})))\r\n}\r\nconst insertOnwers=async(event)=>{\r\n  event.preventDefault()\r\n  let count=0\r\n  let rooms=\"\"\r\n  console.log(\"hello\")\r\n  Promise.all(\r\n    res.map(async(room)=>{\r\n      try{\r\n      await axios.post(\"http://localhost:5004/api/Rooms/insertOnwers\",{\r\n        room_id:room.id,\r\n        user_id:userId\r\n      })\r\n      count+=1\r\n    }\r\n    catch{\r\n      rooms+=room.type+\" \"\r\n    }\r\n    })\r\n  ).then(()=>{\r\n    if(count==res.length){\r\n      alert(\"Payment done\")\r\n    }\r\n    else{\r\n      alert(\"These rooms already booked:\"+rooms)\r\n    }\r\n  })\r\n  console.log(rooms)\r\n\r\n}\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <form class=\"Block\">\r\n         <h3 style={headingStyle}>Your Information</h3>\r\n         <br></br>\r\n         <img\r\n          style={{ height: \"500px\", width: \"500px\" }}\r\n          src={img}\r\n          alt=\"Avatar\"\r\n       />\r\n        <br></br>\r\n        <div className=\"lab\" style={{ marginTop: \"30px\" }}>\r\n\r\n          <b>\r\n            <label>Username</label>\r\n          </b>\r\n          <br></br>\r\n          <label>{Name}</label>\r\n          <br></br>\r\n          <b>\r\n            <label>Email</label>\r\n          </b>\r\n          <br></br>\r\n        </div>\r\n        <label>{Email}</label>\r\n        <br></br>\r\n        <button\r\n          class=\"btn-dark\"\r\n          onClick={(event) => {\r\n            event.preventDefault();\r\n            setModalISOpen(true);\r\n          }}\r\n        >\r\n          My Orders\r\n        </button>\r\n        {\r\n          done&& <button\r\n          class=\"btn-dark\"\r\n          onClick={(event) => {\r\n            event.preventDefault();\r\n           setModalISOpen2(true);\r\n          }}\r\n        >\r\n          My Booked Rooms\r\n        </button>\r\n        }\r\n       \r\n      </form>\r\n      <Modals modalISOpen={modalISOpen} setModalISOpen={setModalISOpen} res={res} DeleteRoomHandler={DeleteRoomHandler} insertOnwers={insertOnwers} sum={sum}/>\r\n      {\r\n        <Modal\r\n        class=\"modal\"\r\n        isOpen={modalISOpen2}\r\n        style={{\r\n          overlay: {\r\n            top:100,\r\n            position: \"fixed\",\r\n            left: \"28%\",\r\n            backgroundColor: \"transparent\",\r\n            width: \"700px\",\r\n            outline: \"no\",\r\n            height: \"500px\",\r\n            transform:\"scale(1)\",\r\n            transition:\"transform 0.3s cubic-bezier(0.465, 0.183, 0.153, 0.946)\",\r\n            opacity:\"0.3s cubic-bezier(0.465, 0.183, 0.153, 0.946)\",\r\n\r\n          },\r\n          content: {\r\n            position: \"absolute\",\r\n          }\r\n        }}\r\n      >\r\n        <ul class=\"list-group\">\r\n          {done==true?bookedrooms.map((object) => {\r\n            console.log(\"Rooms:\")\r\n            console.log(object.source)\r\n            return (\r\n              <li\r\n                class=\"list-group-item \"\r\n                style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n              >\r\n                <img className=\"image2\" src={object?.source} alt=\"\"></img>\r\n                <p>{object?.type}</p>\r\n                <p>{object?.price}</p>\r\n                <button style={{height:\"50px\",borderRadius:\"20px\"}} onClick={()=>{DeleteRoomHandler(object?.id)}}>Delete</button>\r\n              </li>\r\n            );\r\n          }):<></>}\r\n        </ul>\r\n        <div style={{display:\"flex\",justifyContent:\"space-between\"}}>\r\n        <button\r\n          className=\"closing\"\r\n          style={{ marginTop: \"20px\" ,borderRadius:\"20px\" }}\r\n          onClick={() => setModalISOpen2(false)}\r\n        >\r\n          Close\r\n        </button>\r\n        </div>\r\n      </Modal>\r\n      }\r\n\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Account;\r\n"]},"metadata":{},"sourceType":"module"}